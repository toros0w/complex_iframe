<template>
  <div class="planEditWindow3d">
    <div class="planEditWindow3d__checkboxWrapper">
      <InputSwitch v-model="formData.is_3d" />
      <label for="">3D-планировка</label>
      <button class="infoBtn cursor-pointer" @click="toggle($event)">
        <svg
          width="18"
          height="18"
          viewBox="0 0 18 18"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M18 9.00011C18 4.02912 13.9706 0 9.00014 0C4.02948 0 0 4.02912 0 9.00011C0 13.9703 4.02948 17.9998 9.00014 17.9998C13.9706 17.9998 18 13.9703 18 9.00011Z"
            fill="#3A8EFA"
          />
          <path
            d="M5.01367 6.29784C5.01367 5.79302 5.17573 5.28149 5.49992 4.76336C5.82399 4.24523 6.29707 3.81612 6.91881 3.47597C7.5406 3.13593 8.26599 2.96582 9.095 2.96582C9.86548 2.96582 10.5458 3.10807 11.1357 3.39228C11.7256 3.67663 12.1812 4.06325 12.5028 4.55211C12.8242 5.04111 12.985 5.57245 12.985 6.14638C12.985 6.59812 12.8933 6.99411 12.71 7.33411C12.5266 7.67426 12.3087 7.96786 12.0563 8.21492C11.8039 8.46205 11.3508 8.87792 10.6972 9.46248C10.5165 9.62725 10.3716 9.77212 10.2628 9.89695C10.1538 10.0219 10.0727 10.1361 10.0196 10.2397C9.96645 10.3433 9.9252 10.4469 9.89607 10.5506C9.86679 10.6542 9.82297 10.8363 9.76456 11.0966C9.66356 11.6494 9.34732 11.9257 8.81598 11.9257C8.53961 11.9257 8.30706 11.8354 8.11848 11.6546C7.9298 11.474 7.83551 11.2056 7.83551 10.8495C7.83551 10.4031 7.90451 10.0165 8.04277 9.68969C8.18092 9.36282 8.36423 9.07585 8.59279 8.8288C8.8212 8.58166 9.1295 8.2881 9.51746 7.94795C9.8575 7.65039 10.1034 7.42582 10.2548 7.27436C10.4063 7.1229 10.5338 6.95427 10.6375 6.76816C10.7411 6.5822 10.7929 6.3803 10.7929 6.16234C10.7929 5.73723 10.6347 5.37854 10.3186 5.08621C10.0024 4.79402 9.59445 4.64778 9.095 4.64778C8.51033 4.64778 8.07988 4.79525 7.80362 5.0902C7.52725 5.38514 7.29347 5.81958 7.10213 6.39351C6.92143 6.99411 6.57863 7.29428 6.07381 7.29428C5.77611 7.29428 5.52502 7.18939 5.32052 6.97941C5.11594 6.7695 5.01367 6.54233 5.01367 6.29784ZM8.9037 15.0345C8.57948 15.0345 8.2965 14.9295 8.05474 14.7196C7.81287 14.5098 7.69202 14.2162 7.69202 13.8388C7.69202 13.504 7.80884 13.2224 8.04277 12.9938C8.27655 12.7654 8.56351 12.6511 8.90366 12.6511C9.23848 12.6511 9.52007 12.7654 9.74863 12.9938C9.97704 13.2224 10.0914 13.504 10.0914 13.8388C10.0914 14.2108 9.97182 14.5031 9.73267 14.7156C9.49352 14.9282 9.21722 15.0345 8.9037 15.0345Z"
            fill="white"
          />
        </svg>
      </button>
      <OverlayPanel ref="op" class="planEditWindow3dOverlay">
        <div class="flex flex-col justify-center items-center">
          <div class="text">Пример отображения 3D-планировки</div>
          <img
            :src="require('@/shared/assets/images/layoutsRoom/layout3d.png')"
            alt=""
          />
        </div>
      </OverlayPanel>
    </div>
    <div
      class="planEditWindow3d__content mt-5 2xl:max-w-[600px] xl:max-w-[400px]"
      v-if="formData.is_3d"
    >
      <div class="inputWrapper flex flex-col mb-5">
        <label for="" class="mb-5">URL 3D-планировки*</label>
        <InputText v-model="formData['3d_url']" />
      </div>
      <Message :closable="false" class="!w-max">
        <template #messageicon>
          <svg
            width="18"
            height="18"
            viewBox="0 0 18 18"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
            class="w-[40px] mr-2.5"
          >
            <path
              d="M8.99966 8.25C8.80074 8.25 8.60998 8.32902 8.46933 8.46967C8.32867 8.61032 8.24966 8.80109 8.24966 9V11.25C8.24966 11.4489 8.32867 11.6397 8.46933 11.7803C8.60998 11.921 8.80074 12 8.99966 12C9.19857 12 9.38933 11.921 9.52999 11.7803C9.67064 11.6397 9.74965 11.4489 9.74965 11.25V9C9.74965 8.80109 9.67064 8.61032 9.52999 8.46967C9.38933 8.32902 9.19857 8.25 8.99966 8.25ZM8.99966 6C8.85132 6 8.70631 6.04399 8.58298 6.1264C8.45964 6.20881 8.36351 6.32594 8.30675 6.46299C8.24998 6.60003 8.23513 6.75083 8.26407 6.89632C8.293 7.0418 8.36444 7.17544 8.46933 7.28033C8.57421 7.38522 8.70785 7.45665 8.85334 7.48559C8.99882 7.51453 9.14962 7.49968 9.28667 7.44291C9.42371 7.38614 9.54085 7.29001 9.62326 7.16668C9.70567 7.04334 9.74965 6.89834 9.74965 6.75C9.74965 6.55109 9.67064 6.36032 9.52999 6.21967C9.38933 6.07902 9.19857 6 8.99966 6ZM8.99966 1.5C8.01474 1.5 7.03947 1.69399 6.12953 2.0709C5.21959 2.44781 4.39279 3.00026 3.69635 3.6967C2.28983 5.10322 1.49966 7.01088 1.49966 9C1.4931 10.7319 2.09275 12.4114 3.19466 13.7475L1.69466 15.2475C1.59059 15.353 1.52009 15.4869 1.49206 15.6324C1.46403 15.7779 1.47972 15.9284 1.53716 16.065C1.59945 16.1999 1.70043 16.3133 1.82729 16.3908C1.95415 16.4682 2.10116 16.5063 2.24966 16.5H8.99966C10.9888 16.5 12.8964 15.7098 14.303 14.3033C15.7095 12.8968 16.4997 10.9891 16.4997 9C16.4997 7.01088 15.7095 5.10322 14.303 3.6967C12.8964 2.29018 10.9888 1.5 8.99966 1.5ZM8.99966 15H4.05716L4.75466 14.3025C4.82552 14.233 4.8819 14.1502 4.92052 14.0588C4.95914 13.9674 4.97924 13.8692 4.97966 13.77C4.97684 13.5722 4.89597 13.3835 4.75466 13.245C3.77259 12.264 3.16104 10.9729 3.02417 9.59159C2.88731 8.21029 3.23361 6.82425 4.00408 5.66964C4.77454 4.51503 5.9215 3.66327 7.24954 3.25948C8.57758 2.85569 10.0045 2.92485 11.2873 3.45519C12.5701 3.98552 13.6293 4.94421 14.2845 6.16792C14.9397 7.39163 15.1503 8.80466 14.8805 10.1663C14.6107 11.5279 13.8771 12.7538 12.8048 13.6352C11.7325 14.5166 10.3877 14.9989 8.99966 15Z"
              fill="#3A8EFA"
            />
          </svg>
        </template>
        <template #default>Вставьте ссылку на 3D-планировку.</template>
      </Message>
    </div>
  </div>
</template>

<script setup>
import OverlayPanel from "primevue/overlaypanel";
import { ref } from "vue";

const props = defineProps({
  formData: Object,
  plan: Object
})

const op = ref();
const toggle = (event) => {
  op.value.toggle(event);
};
</script>

<style lang="scss">
.planEditWindow3dOverlay {
  border: 1px solid #3a8efa;
  &:before {
    border-bottom-color: #3a8efa;
  }
  &:after {
    border-bottom-color: #3a8efa;
  }
  &.p-confirm-popup-flipped {
    &:before {
      border-top-color: #3a8efa;
    }
    &:after {
      border-top-color: #3a8efa;
    }
  }
}
.planEditWindow3d {
  &__checkboxWrapper {
    width: auto;
    display: flex;
    justify-content: flex-start;
    align-items: center;

    label {
      margin-left: 20px;
      margin-right: 10px;
    }
  }
}
</style>
